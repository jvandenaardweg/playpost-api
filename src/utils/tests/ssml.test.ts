import { getSSMLParts, GOOGLE_CHARACTER_LIMIT, AWS_CHARACTER_LIMIT } from '../ssml';

describe('ssml', () => {

  describe('getSSMLParts()', () => {

    it('Should generate one SSML part if it stays below the character limit.', () => {
      const exampleSsml = '<speak><p>A paragraph to be spoken.</p><p>And another one.</p></speak>';
      const expected = '<speak><p>A paragraph to be spoken.</p><p>And another one.</p></speak>';

      const ssmlParts = getSSMLParts(exampleSsml);

      expect(ssmlParts).toHaveLength(1);
      expect(ssmlParts[0]).toBe(expected);
    });

    it('Should generate 2 SSML parts if it goes over the character limit.', () => {
      // tslint:disable max-line-length
      const exampleSsml = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ornare posuere massa in convallis.</p><break time="500ms" /><p>Integer volutpat sem in mollis egestas. Morbi rutrum ante a imperdiet interdum. Sed velit arcu, viverra sed nulla sit amet, auctor egestas dolor.</p><p>Cras interdum pulvinar posuere. Pellentesque mollis consectetur elit, vitae iaculis nibh dapibus vel. Duis maximus fringilla magna ac fermentum. Vestibulum porttitor eros tellus, a fermentum leo bibendum pellentesque. Mauris semper fringilla mauris, non fringilla velit dictum sed.</p></speak>';

      const expectedFirstPart = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla ornare posuere massa in convallis.</p><break time=\"500ms\" /><p>Integer volutpat sem in mollis egestas. Morbi rutrum ante a imperdiet interdum. Sed velit arcu, viverra sed nulla sit amet, auctor egestas dolor.</p></speak>';
      const expectedSecondPart = '<speak><p>Cras interdum pulvinar posuere. Pellentesque mollis consectetur elit, vitae iaculis nibh dapibus vel. Duis maximus fringilla magna ac fermentum. Vestibulum porttitor eros tellus, a fermentum leo bibendum pellentesque. Mauris semper fringilla mauris, non fringilla velit dictum sed.</p></speak>';

      const ssmlParts = getSSMLParts(exampleSsml, {
        softLimit: 200,
        hardLimit: 500
      });

      expect(ssmlParts).toHaveLength(2);
      expect(ssmlParts[0]).toBe(expectedFirstPart);
      expect(ssmlParts[1]).toBe(expectedSecondPart);
    });

    it('Should generate the correct SSML parts for the Google Text-To-Speech API.', () => {

      // tslint:disable max-line-length
      const exampleSsml = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eget neque id orci lobortis dignissim et in augue. Fusce pulvinar, enim non dictum laoreet, lacus purus placerat lacus, non dictum leo nibh at felis. Phasellus convallis, tellus nec pharetra lacinia, nisi nisl ornare enim, ut porttitor urna quam mollis nisl. Maecenas malesuada risus a ornare lacinia. In eleifend vehicula ipsum, at ultrices dui ultricies ut. Maecenas in finibus enim, nec gravida enim. Proin semper varius nisi. Aenean auctor finibus metus eu cursus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In sed sollicitudin nibh, nec pharetra dolor. Vestibulum molestie nunc in arcu condimentum scelerisque. Curabitur quam eros, dictum eu enim in, vulputate dictum tellus. Duis sed pulvinar urna, nec pharetra sem. Donec volutpat, augue vel dictum vehicula, nisi justo iaculis velit, in tincidunt dolor lorem in est.</p><p>Aenean vitae sollicitudin justo. Morbi sapien leo, dictum quis aliquam nec, egestas quis nulla. Duis semper dui leo. Aenean non malesuada nisl. Aenean semper quam velit. Praesent a elit lectus. Nulla ac justo consectetur, auctor leo eu, ultricies sapien. Curabitur in efficitur urna. Vestibulum efficitur orci quis justo iaculis, et ullamcorper turpis fringilla. Pellentesque est diam, varius sed mollis eu, vulputate scelerisque odio. Proin tincidunt elementum tortor a ornare. Nulla vel orci in diam mattis aliquam molestie et libero. Integer accumsan mi justo, vitae viverra odio rutrum eu. Praesent eu tellus mollis, interdum odio a, pulvinar mi. Fusce nibh felis, euismod ac felis quis, ornare porta magna. Integer ipsum felis, faucibus ac auctor bibendum, malesuada non est.</p><p>Pellentesque consequat mi vitae nisi pellentesque, a dapibus sapien tempor. Donec sit amet efficitur sapien. Fusce libero arcu, luctus ut maximus eu, tempor ut nunc. Nam vitae metus nunc. Nam tempus a eros vel facilisis. Aliquam sit amet mollis arcu. Praesent sollicitudin, mauris a lacinia malesuada, sem eros tempus lectus, hendrerit volutpat mauris mi nec lorem. Praesent ac porttitor massa. In tincidunt augue libero, nec luctus leo placerat eu. Pellentesque ultrices nisl urna, et ullamcorper metus pulvinar vel. Suspendisse potenti. Donec molestie vestibulum diam, vel lacinia odio dapibus quis. Vivamus efficitur, ligula quis facilisis feugiat, erat risus interdum sapien, sit amet tristique nibh enim sit amet velit. Vestibulum a malesuada ipsum, vel pharetra elit.</p><p>Donec et metus ac leo mattis vestibulum non nec orci. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse lacus nunc, fringilla eu consectetur sit amet, rhoncus sed ipsum. Sed malesuada odio nec nibh facilisis eleifend. Mauris laoreet feugiat odio. Morbi cursus nunc nec nulla tincidunt, in consectetur felis bibendum. Nam malesuada maximus urna, nec tristique enim tincidunt at. Nunc sagittis lorem vel metus molestie, sed iaculis mauris ornare. Sed et metus nulla. Sed at enim quis ligula blandit consequat sed eget ligula. Proin quis pretium dui.</p><p>Sed malesuada dui id odio hendrerit laoreet. Maecenas dolor elit, fringilla nec tincidunt a, ultrices eget urna. Aenean porttitor est quis purus condimentum tincidunt eget sit amet purus. In consectetur, sem vel congue pretium, magna ipsum imperdiet nisl, eu suscipit tortor est sit amet dolor. Sed elit velit, lobortis eu diam vitae, accumsan mollis ligula. Nam mauris ipsum, lacinia in ex dignissim, consequat posuere ex. Nullam sollicitudin sapien quis blandit facilisis. Duis sodales hendrerit dolor nec pharetra. Sed imperdiet sem eget sem posuere, a porttitor felis blandit. Proin rhoncus vestibulum diam in porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus.</p><p>Nunc vitae urna sed urna luctus vulputate non ut lorem. Maecenas lobortis nisl eget varius sollicitudin. Nunc sagittis pharetra eros. Integer consectetur scelerisque vulputate. Nulla sed nibh vel urna auctor convallis. Vestibulum a nisi ac sem egestas efficitur in convallis augue. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras auctor enim ac dui ultrices porta. Nam auctor suscipit felis eget vestibulum. Aenean a ipsum vitae enim fringilla aliquet. Donec malesuada elit a egestas ultricies. Fusce sed ex posuere purus commodo consequat. Sed imperdiet tristique ultricies. Cras consequat nisi ut urna vestibulum iaculis. Nam laoreet euismod maximus.</p><p>Sed viverra, magna vitae aliquet faucibus, lacus turpis tristique turpis, eu convallis quam nibh a nisi. In viverra tempus ullamcorper. Quisque sollicitudin vehicula urna, lacinia bibendum felis pulvinar eu. Pellentesque feugiat vehicula nunc, vitae bibendum erat. Curabitur eu felis et augue hendrerit laoreet. Ut et aliquet dolor, eu facilisis justo. Pellentesque elementum iaculis nulla vitae ornare. Integer volutpat, turpis eu placerat fermentum, erat diam tincidunt lacus, ut consequat arcu ex vel ipsum. Fusce nec quam molestie, laoreet elit ut, dictum nulla. Nulla fringilla facilisis accumsan. Sed nisi sem, ornare at cursus accumsan, vehicula vel augue. Cras semper feugiat ex, ac commodo felis rhoncus non.</p><p>Pellentesque pharetra pharetra dictum. Ut urna justo, tristique et ipsum at, sodales gravida tellus. Morbi vitae cursus orci. Ut id dui quis enim blandit egestas. Quisque euismod varius eros, vel tincidunt purus venenatis eu. Praesent tempor, ex at consectetur sodales, nisi erat pharetra sapien, quis ultrices sem leo a ex. Sed et eros fermentum, porttitor mauris a, elementum elit. Etiam a sagittis urna. Nunc ac risus ullamcorper, tincidunt erat eu, efficitur elit. Integer sapien elit, vehicula eu justo in, interdum congue est. Vestibulum id sem a ipsum faucibus posuere. Mauris vel blandit ligula, vel vehicula quam. Curabitur turpis purus, efficitur id varius ac, hendrerit sed nunc. Phasellus quis iaculis massa. Donec nec dui sed ante elementum interdum sed ac quam.</p><p>Vestibulum faucibus ultrices suscipit. Sed lacinia nunc vel lorem facilisis auctor. Nulla facilisi. Nam pretium egestas ligula at efficitur. Sed ut mauris ut mi blandit luctus. Fusce tristique pharetra felis non fermentum. Sed rhoncus fringilla semper. Maecenas suscipit euismod magna pretium vehicula. Duis iaculis pulvinar luctus. Nulla fermentum vulputate nisi in molestie. Suspendisse a urna laoreet, tincidunt lorem nec, accumsan ligula. Pellentesque a quam eu velit scelerisque varius. Nullam quis mollis libero. Maecenas sodales ac leo at auctor. In dapibus commodo magna sit amet sollicitudin. Quisque molestie auctor nunc vitae ornare.</p><p>Vestibulum malesuada non lectus vitae suscipit. Maecenas vel cursus diam. Nunc at malesuada ante. Curabitur facilisis nisl nec dolor tempor, quis tempor lorem pharetra. Morbi pretium, dolor eu tincidunt vestibulum, ligula diam interdum eros, tempor suscipit nulla metus nec enim. Suspendisse id sem mi. Nunc vitae dui ultricies, convallis nunc quis, aliquam tellus. Maecenas at odio eu est semper maximus. Vivamus nec lorem erat. Mauris tempor luctus erat id elementum. Maecenas dictum ex in eros porttitor, eu lobortis nisi pretium. Duis porta vitae dolor quis auctor.</p></speak>';

      const expectedFirstPart = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eget neque id orci lobortis dignissim et in augue. Fusce pulvinar, enim non dictum laoreet, lacus purus placerat lacus, non dictum leo nibh at felis. Phasellus convallis, tellus nec pharetra lacinia, nisi nisl ornare enim, ut porttitor urna quam mollis nisl. Maecenas malesuada risus a ornare lacinia. In eleifend vehicula ipsum, at ultrices dui ultricies ut. Maecenas in finibus enim, nec gravida enim. Proin semper varius nisi. Aenean auctor finibus metus eu cursus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In sed sollicitudin nibh, nec pharetra dolor. Vestibulum molestie nunc in arcu condimentum scelerisque. Curabitur quam eros, dictum eu enim in, vulputate dictum tellus. Duis sed pulvinar urna, nec pharetra sem. Donec volutpat, augue vel dictum vehicula, nisi justo iaculis velit, in tincidunt dolor lorem in est.</p><p>Aenean vitae sollicitudin justo. Morbi sapien leo, dictum quis aliquam nec, egestas quis nulla. Duis semper dui leo. Aenean non malesuada nisl. Aenean semper quam velit. Praesent a elit lectus. Nulla ac justo consectetur, auctor leo eu, ultricies sapien. Curabitur in efficitur urna. Vestibulum efficitur orci quis justo iaculis, et ullamcorper turpis fringilla. Pellentesque est diam, varius sed mollis eu, vulputate scelerisque odio. Proin tincidunt elementum tortor a ornare. Nulla vel orci in diam mattis aliquam molestie et libero. Integer accumsan mi justo, vitae viverra odio rutrum eu. Praesent eu tellus mollis, interdum odio a, pulvinar mi. Fusce nibh felis, euismod ac felis quis, ornare porta magna. Integer ipsum felis, faucibus ac auctor bibendum, malesuada non est.</p><p>Pellentesque consequat mi vitae nisi pellentesque, a dapibus sapien tempor. Donec sit amet efficitur sapien. Fusce libero arcu, luctus ut maximus eu, tempor ut nunc. Nam vitae metus nunc. Nam tempus a eros vel facilisis. Aliquam sit amet mollis arcu. Praesent sollicitudin, mauris a lacinia malesuada, sem eros tempus lectus, hendrerit volutpat mauris mi nec lorem. Praesent ac porttitor massa. In tincidunt augue libero, nec luctus leo placerat eu. Pellentesque ultrices nisl urna, et ullamcorper metus pulvinar vel. Suspendisse potenti. Donec molestie vestibulum diam, vel lacinia odio dapibus quis. Vivamus efficitur, ligula quis facilisis feugiat, erat risus interdum sapien, sit amet tristique nibh enim sit amet velit. Vestibulum a malesuada ipsum, vel pharetra elit.</p><p>Donec et metus ac leo mattis vestibulum non nec orci. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse lacus nunc, fringilla eu consectetur sit amet, rhoncus sed ipsum. Sed malesuada odio nec nibh facilisis eleifend. Mauris laoreet feugiat odio. Morbi cursus nunc nec nulla tincidunt, in consectetur felis bibendum. Nam malesuada maximus urna, nec tristique enim tincidunt at. Nunc sagittis lorem vel metus molestie, sed iaculis mauris ornare. Sed et metus nulla. Sed at enim quis ligula blandit consequat sed eget ligula. Proin quis pretium dui.</p><p>Sed malesuada dui id odio hendrerit laoreet. Maecenas dolor elit, fringilla nec tincidunt a, ultrices eget urna. Aenean porttitor est quis purus condimentum tincidunt eget sit amet purus. In consectetur, sem vel congue pretium, magna ipsum imperdiet nisl, eu suscipit tortor est sit amet dolor. Sed elit velit, lobortis eu diam vitae, accumsan mollis ligula. Nam mauris ipsum, lacinia in ex dignissim, consequat posuere ex. Nullam sollicitudin sapien quis blandit facilisis. Duis sodales hendrerit dolor nec pharetra. Sed imperdiet sem eget sem posuere, a porttitor felis blandit. Proin rhoncus vestibulum diam in porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus.</p><p>Nunc vitae urna sed urna luctus vulputate non ut lorem. Maecenas lobortis nisl eget varius sollicitudin. Nunc sagittis pharetra eros. Integer consectetur scelerisque vulputate. Nulla sed nibh vel urna auctor convallis. Vestibulum a nisi ac sem egestas efficitur in convallis augue. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras auctor enim ac dui ultrices porta. Nam auctor suscipit felis eget vestibulum. Aenean a ipsum vitae enim fringilla aliquet. Donec malesuada elit a egestas ultricies. Fusce sed ex posuere purus commodo consequat. Sed imperdiet tristique ultricies. Cras consequat nisi ut urna vestibulum iaculis. Nam laoreet euismod maximus.</p></speak>';
      const expectedSecondPart = '<speak><p>Sed viverra, magna vitae aliquet faucibus, lacus turpis tristique turpis, eu convallis quam nibh a nisi. In viverra tempus ullamcorper. Quisque sollicitudin vehicula urna, lacinia bibendum felis pulvinar eu. Pellentesque feugiat vehicula nunc, vitae bibendum erat. Curabitur eu felis et augue hendrerit laoreet. Ut et aliquet dolor, eu facilisis justo. Pellentesque elementum iaculis nulla vitae ornare. Integer volutpat, turpis eu placerat fermentum, erat diam tincidunt lacus, ut consequat arcu ex vel ipsum. Fusce nec quam molestie, laoreet elit ut, dictum nulla. Nulla fringilla facilisis accumsan. Sed nisi sem, ornare at cursus accumsan, vehicula vel augue. Cras semper feugiat ex, ac commodo felis rhoncus non.</p><p>Pellentesque pharetra pharetra dictum. Ut urna justo, tristique et ipsum at, sodales gravida tellus. Morbi vitae cursus orci. Ut id dui quis enim blandit egestas. Quisque euismod varius eros, vel tincidunt purus venenatis eu. Praesent tempor, ex at consectetur sodales, nisi erat pharetra sapien, quis ultrices sem leo a ex. Sed et eros fermentum, porttitor mauris a, elementum elit. Etiam a sagittis urna. Nunc ac risus ullamcorper, tincidunt erat eu, efficitur elit. Integer sapien elit, vehicula eu justo in, interdum congue est. Vestibulum id sem a ipsum faucibus posuere. Mauris vel blandit ligula, vel vehicula quam. Curabitur turpis purus, efficitur id varius ac, hendrerit sed nunc. Phasellus quis iaculis massa. Donec nec dui sed ante elementum interdum sed ac quam.</p><p>Vestibulum faucibus ultrices suscipit. Sed lacinia nunc vel lorem facilisis auctor. Nulla facilisi. Nam pretium egestas ligula at efficitur. Sed ut mauris ut mi blandit luctus. Fusce tristique pharetra felis non fermentum. Sed rhoncus fringilla semper. Maecenas suscipit euismod magna pretium vehicula. Duis iaculis pulvinar luctus. Nulla fermentum vulputate nisi in molestie. Suspendisse a urna laoreet, tincidunt lorem nec, accumsan ligula. Pellentesque a quam eu velit scelerisque varius. Nullam quis mollis libero. Maecenas sodales ac leo at auctor. In dapibus commodo magna sit amet sollicitudin. Quisque molestie auctor nunc vitae ornare.</p><p>Vestibulum malesuada non lectus vitae suscipit. Maecenas vel cursus diam. Nunc at malesuada ante. Curabitur facilisis nisl nec dolor tempor, quis tempor lorem pharetra. Morbi pretium, dolor eu tincidunt vestibulum, ligula diam interdum eros, tempor suscipit nulla metus nec enim. Suspendisse id sem mi. Nunc vitae dui ultricies, convallis nunc quis, aliquam tellus. Maecenas at odio eu est semper maximus. Vivamus nec lorem erat. Mauris tempor luctus erat id elementum. Maecenas dictum ex in eros porttitor, eu lobortis nisi pretium. Duis porta vitae dolor quis auctor.</p></speak>';

      const ssmlParts = getSSMLParts(exampleSsml, {
        softLimit: GOOGLE_CHARACTER_LIMIT - 1000,
        hardLimit: GOOGLE_CHARACTER_LIMIT
      });

      expect(ssmlParts).toHaveLength(2);
      expect(ssmlParts[0]).toBe(expectedFirstPart);
      expect(ssmlParts[0]).toHaveLength(4531);
      expect(ssmlParts[1]).toBe(expectedSecondPart);
      expect(ssmlParts[1]).toHaveLength(2748);
    });

    it('Should generate the correct SSML parts for AWS Polly.', () => {

      // tslint:disable max-line-length
      const exampleSsml = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eget neque id orci lobortis dignissim et in augue. Fusce pulvinar, enim non dictum laoreet, lacus purus placerat lacus, non dictum leo nibh at felis. Phasellus convallis, tellus nec pharetra lacinia, nisi nisl ornare enim, ut porttitor urna quam mollis nisl. Maecenas malesuada risus a ornare lacinia. In eleifend vehicula ipsum, at ultrices dui ultricies ut. Maecenas in finibus enim, nec gravida enim. Proin semper varius nisi. Aenean auctor finibus metus eu cursus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In sed sollicitudin nibh, nec pharetra dolor. Vestibulum molestie nunc in arcu condimentum scelerisque. Curabitur quam eros, dictum eu enim in, vulputate dictum tellus. Duis sed pulvinar urna, nec pharetra sem. Donec volutpat, augue vel dictum vehicula, nisi justo iaculis velit, in tincidunt dolor lorem in est.</p><p>Aenean vitae sollicitudin justo. Morbi sapien leo, dictum quis aliquam nec, egestas quis nulla. Duis semper dui leo. Aenean non malesuada nisl. Aenean semper quam velit. Praesent a elit lectus. Nulla ac justo consectetur, auctor leo eu, ultricies sapien. Curabitur in efficitur urna. Vestibulum efficitur orci quis justo iaculis, et ullamcorper turpis fringilla. Pellentesque est diam, varius sed mollis eu, vulputate scelerisque odio. Proin tincidunt elementum tortor a ornare. Nulla vel orci in diam mattis aliquam molestie et libero. Integer accumsan mi justo, vitae viverra odio rutrum eu. Praesent eu tellus mollis, interdum odio a, pulvinar mi. Fusce nibh felis, euismod ac felis quis, ornare porta magna. Integer ipsum felis, faucibus ac auctor bibendum, malesuada non est.</p><p>Pellentesque consequat mi vitae nisi pellentesque, a dapibus sapien tempor. Donec sit amet efficitur sapien. Fusce libero arcu, luctus ut maximus eu, tempor ut nunc. Nam vitae metus nunc. Nam tempus a eros vel facilisis. Aliquam sit amet mollis arcu. Praesent sollicitudin, mauris a lacinia malesuada, sem eros tempus lectus, hendrerit volutpat mauris mi nec lorem. Praesent ac porttitor massa. In tincidunt augue libero, nec luctus leo placerat eu. Pellentesque ultrices nisl urna, et ullamcorper metus pulvinar vel. Suspendisse potenti. Donec molestie vestibulum diam, vel lacinia odio dapibus quis. Vivamus efficitur, ligula quis facilisis feugiat, erat risus interdum sapien, sit amet tristique nibh enim sit amet velit. Vestibulum a malesuada ipsum, vel pharetra elit.</p><p>Donec et metus ac leo mattis vestibulum non nec orci. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse lacus nunc, fringilla eu consectetur sit amet, rhoncus sed ipsum. Sed malesuada odio nec nibh facilisis eleifend. Mauris laoreet feugiat odio. Morbi cursus nunc nec nulla tincidunt, in consectetur felis bibendum. Nam malesuada maximus urna, nec tristique enim tincidunt at. Nunc sagittis lorem vel metus molestie, sed iaculis mauris ornare. Sed et metus nulla. Sed at enim quis ligula blandit consequat sed eget ligula. Proin quis pretium dui.</p><p>Sed malesuada dui id odio hendrerit laoreet. Maecenas dolor elit, fringilla nec tincidunt a, ultrices eget urna. Aenean porttitor est quis purus condimentum tincidunt eget sit amet purus. In consectetur, sem vel congue pretium, magna ipsum imperdiet nisl, eu suscipit tortor est sit amet dolor. Sed elit velit, lobortis eu diam vitae, accumsan mollis ligula. Nam mauris ipsum, lacinia in ex dignissim, consequat posuere ex. Nullam sollicitudin sapien quis blandit facilisis. Duis sodales hendrerit dolor nec pharetra. Sed imperdiet sem eget sem posuere, a porttitor felis blandit. Proin rhoncus vestibulum diam in porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus.</p><p>Nunc vitae urna sed urna luctus vulputate non ut lorem. Maecenas lobortis nisl eget varius sollicitudin. Nunc sagittis pharetra eros. Integer consectetur scelerisque vulputate. Nulla sed nibh vel urna auctor convallis. Vestibulum a nisi ac sem egestas efficitur in convallis augue. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras auctor enim ac dui ultrices porta. Nam auctor suscipit felis eget vestibulum. Aenean a ipsum vitae enim fringilla aliquet. Donec malesuada elit a egestas ultricies. Fusce sed ex posuere purus commodo consequat. Sed imperdiet tristique ultricies. Cras consequat nisi ut urna vestibulum iaculis. Nam laoreet euismod maximus.</p><p>Sed viverra, magna vitae aliquet faucibus, lacus turpis tristique turpis, eu convallis quam nibh a nisi. In viverra tempus ullamcorper. Quisque sollicitudin vehicula urna, lacinia bibendum felis pulvinar eu. Pellentesque feugiat vehicula nunc, vitae bibendum erat. Curabitur eu felis et augue hendrerit laoreet. Ut et aliquet dolor, eu facilisis justo. Pellentesque elementum iaculis nulla vitae ornare. Integer volutpat, turpis eu placerat fermentum, erat diam tincidunt lacus, ut consequat arcu ex vel ipsum. Fusce nec quam molestie, laoreet elit ut, dictum nulla. Nulla fringilla facilisis accumsan. Sed nisi sem, ornare at cursus accumsan, vehicula vel augue. Cras semper feugiat ex, ac commodo felis rhoncus non.</p><p>Pellentesque pharetra pharetra dictum. Ut urna justo, tristique et ipsum at, sodales gravida tellus. Morbi vitae cursus orci. Ut id dui quis enim blandit egestas. Quisque euismod varius eros, vel tincidunt purus venenatis eu. Praesent tempor, ex at consectetur sodales, nisi erat pharetra sapien, quis ultrices sem leo a ex. Sed et eros fermentum, porttitor mauris a, elementum elit. Etiam a sagittis urna. Nunc ac risus ullamcorper, tincidunt erat eu, efficitur elit. Integer sapien elit, vehicula eu justo in, interdum congue est. Vestibulum id sem a ipsum faucibus posuere. Mauris vel blandit ligula, vel vehicula quam. Curabitur turpis purus, efficitur id varius ac, hendrerit sed nunc. Phasellus quis iaculis massa. Donec nec dui sed ante elementum interdum sed ac quam.</p><p>Vestibulum faucibus ultrices suscipit. Sed lacinia nunc vel lorem facilisis auctor. Nulla facilisi. Nam pretium egestas ligula at efficitur. Sed ut mauris ut mi blandit luctus. Fusce tristique pharetra felis non fermentum. Sed rhoncus fringilla semper. Maecenas suscipit euismod magna pretium vehicula. Duis iaculis pulvinar luctus. Nulla fermentum vulputate nisi in molestie. Suspendisse a urna laoreet, tincidunt lorem nec, accumsan ligula. Pellentesque a quam eu velit scelerisque varius. Nullam quis mollis libero. Maecenas sodales ac leo at auctor. In dapibus commodo magna sit amet sollicitudin. Quisque molestie auctor nunc vitae ornare.</p><p>Vestibulum malesuada non lectus vitae suscipit. Maecenas vel cursus diam. Nunc at malesuada ante. Curabitur facilisis nisl nec dolor tempor, quis tempor lorem pharetra. Morbi pretium, dolor eu tincidunt vestibulum, ligula diam interdum eros, tempor suscipit nulla metus nec enim. Suspendisse id sem mi. Nunc vitae dui ultricies, convallis nunc quis, aliquam tellus. Maecenas at odio eu est semper maximus. Vivamus nec lorem erat. Mauris tempor luctus erat id elementum. Maecenas dictum ex in eros porttitor, eu lobortis nisi pretium. Duis porta vitae dolor quis auctor.</p></speak>';

      const expectedFirstPart = '<speak><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam eget neque id orci lobortis dignissim et in augue. Fusce pulvinar, enim non dictum laoreet, lacus purus placerat lacus, non dictum leo nibh at felis. Phasellus convallis, tellus nec pharetra lacinia, nisi nisl ornare enim, ut porttitor urna quam mollis nisl. Maecenas malesuada risus a ornare lacinia. In eleifend vehicula ipsum, at ultrices dui ultricies ut. Maecenas in finibus enim, nec gravida enim. Proin semper varius nisi. Aenean auctor finibus metus eu cursus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In sed sollicitudin nibh, nec pharetra dolor. Vestibulum molestie nunc in arcu condimentum scelerisque. Curabitur quam eros, dictum eu enim in, vulputate dictum tellus. Duis sed pulvinar urna, nec pharetra sem. Donec volutpat, augue vel dictum vehicula, nisi justo iaculis velit, in tincidunt dolor lorem in est.</p><p>Aenean vitae sollicitudin justo. Morbi sapien leo, dictum quis aliquam nec, egestas quis nulla. Duis semper dui leo. Aenean non malesuada nisl. Aenean semper quam velit. Praesent a elit lectus. Nulla ac justo consectetur, auctor leo eu, ultricies sapien. Curabitur in efficitur urna. Vestibulum efficitur orci quis justo iaculis, et ullamcorper turpis fringilla. Pellentesque est diam, varius sed mollis eu, vulputate scelerisque odio. Proin tincidunt elementum tortor a ornare. Nulla vel orci in diam mattis aliquam molestie et libero. Integer accumsan mi justo, vitae viverra odio rutrum eu. Praesent eu tellus mollis, interdum odio a, pulvinar mi. Fusce nibh felis, euismod ac felis quis, ornare porta magna. Integer ipsum felis, faucibus ac auctor bibendum, malesuada non est.</p><p>Pellentesque consequat mi vitae nisi pellentesque, a dapibus sapien tempor. Donec sit amet efficitur sapien. Fusce libero arcu, luctus ut maximus eu, tempor ut nunc. Nam vitae metus nunc. Nam tempus a eros vel facilisis. Aliquam sit amet mollis arcu. Praesent sollicitudin, mauris a lacinia malesuada, sem eros tempus lectus, hendrerit volutpat mauris mi nec lorem. Praesent ac porttitor massa. In tincidunt augue libero, nec luctus leo placerat eu. Pellentesque ultrices nisl urna, et ullamcorper metus pulvinar vel. Suspendisse potenti. Donec molestie vestibulum diam, vel lacinia odio dapibus quis. Vivamus efficitur, ligula quis facilisis feugiat, erat risus interdum sapien, sit amet tristique nibh enim sit amet velit. Vestibulum a malesuada ipsum, vel pharetra elit.</p></speak>';
      const expectedSecondPart = '<speak><p>Donec et metus ac leo mattis vestibulum non nec orci. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse lacus nunc, fringilla eu consectetur sit amet, rhoncus sed ipsum. Sed malesuada odio nec nibh facilisis eleifend. Mauris laoreet feugiat odio. Morbi cursus nunc nec nulla tincidunt, in consectetur felis bibendum. Nam malesuada maximus urna, nec tristique enim tincidunt at. Nunc sagittis lorem vel metus molestie, sed iaculis mauris ornare. Sed et metus nulla. Sed at enim quis ligula blandit consequat sed eget ligula. Proin quis pretium dui.</p><p>Sed malesuada dui id odio hendrerit laoreet. Maecenas dolor elit, fringilla nec tincidunt a, ultrices eget urna. Aenean porttitor est quis purus condimentum tincidunt eget sit amet purus. In consectetur, sem vel congue pretium, magna ipsum imperdiet nisl, eu suscipit tortor est sit amet dolor. Sed elit velit, lobortis eu diam vitae, accumsan mollis ligula. Nam mauris ipsum, lacinia in ex dignissim, consequat posuere ex. Nullam sollicitudin sapien quis blandit facilisis. Duis sodales hendrerit dolor nec pharetra. Sed imperdiet sem eget sem posuere, a porttitor felis blandit. Proin rhoncus vestibulum diam in porttitor. Interdum et malesuada fames ac ante ipsum primis in faucibus.</p><p>Nunc vitae urna sed urna luctus vulputate non ut lorem. Maecenas lobortis nisl eget varius sollicitudin. Nunc sagittis pharetra eros. Integer consectetur scelerisque vulputate. Nulla sed nibh vel urna auctor convallis. Vestibulum a nisi ac sem egestas efficitur in convallis augue. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras auctor enim ac dui ultrices porta. Nam auctor suscipit felis eget vestibulum. Aenean a ipsum vitae enim fringilla aliquet. Donec malesuada elit a egestas ultricies. Fusce sed ex posuere purus commodo consequat. Sed imperdiet tristique ultricies. Cras consequat nisi ut urna vestibulum iaculis. Nam laoreet euismod maximus.</p><p>Sed viverra, magna vitae aliquet faucibus, lacus turpis tristique turpis, eu convallis quam nibh a nisi. In viverra tempus ullamcorper. Quisque sollicitudin vehicula urna, lacinia bibendum felis pulvinar eu. Pellentesque feugiat vehicula nunc, vitae bibendum erat. Curabitur eu felis et augue hendrerit laoreet. Ut et aliquet dolor, eu facilisis justo. Pellentesque elementum iaculis nulla vitae ornare. Integer volutpat, turpis eu placerat fermentum, erat diam tincidunt lacus, ut consequat arcu ex vel ipsum. Fusce nec quam molestie, laoreet elit ut, dictum nulla. Nulla fringilla facilisis accumsan. Sed nisi sem, ornare at cursus accumsan, vehicula vel augue. Cras semper feugiat ex, ac commodo felis rhoncus non.</p></speak>';
      const expectedThirdPart = '<speak><p>Pellentesque pharetra pharetra dictum. Ut urna justo, tristique et ipsum at, sodales gravida tellus. Morbi vitae cursus orci. Ut id dui quis enim blandit egestas. Quisque euismod varius eros, vel tincidunt purus venenatis eu. Praesent tempor, ex at consectetur sodales, nisi erat pharetra sapien, quis ultrices sem leo a ex. Sed et eros fermentum, porttitor mauris a, elementum elit. Etiam a sagittis urna. Nunc ac risus ullamcorper, tincidunt erat eu, efficitur elit. Integer sapien elit, vehicula eu justo in, interdum congue est. Vestibulum id sem a ipsum faucibus posuere. Mauris vel blandit ligula, vel vehicula quam. Curabitur turpis purus, efficitur id varius ac, hendrerit sed nunc. Phasellus quis iaculis massa. Donec nec dui sed ante elementum interdum sed ac quam.</p><p>Vestibulum faucibus ultrices suscipit. Sed lacinia nunc vel lorem facilisis auctor. Nulla facilisi. Nam pretium egestas ligula at efficitur. Sed ut mauris ut mi blandit luctus. Fusce tristique pharetra felis non fermentum. Sed rhoncus fringilla semper. Maecenas suscipit euismod magna pretium vehicula. Duis iaculis pulvinar luctus. Nulla fermentum vulputate nisi in molestie. Suspendisse a urna laoreet, tincidunt lorem nec, accumsan ligula. Pellentesque a quam eu velit scelerisque varius. Nullam quis mollis libero. Maecenas sodales ac leo at auctor. In dapibus commodo magna sit amet sollicitudin. Quisque molestie auctor nunc vitae ornare.</p><p>Vestibulum malesuada non lectus vitae suscipit. Maecenas vel cursus diam. Nunc at malesuada ante. Curabitur facilisis nisl nec dolor tempor, quis tempor lorem pharetra. Morbi pretium, dolor eu tincidunt vestibulum, ligula diam interdum eros, tempor suscipit nulla metus nec enim. Suspendisse id sem mi. Nunc vitae dui ultricies, convallis nunc quis, aliquam tellus. Maecenas at odio eu est semper maximus. Vivamus nec lorem erat. Mauris tempor luctus erat id elementum. Maecenas dictum ex in eros porttitor, eu lobortis nisi pretium. Duis porta vitae dolor quis auctor.</p></speak>';

      const ssmlParts = getSSMLParts(exampleSsml, {
        softLimit: AWS_CHARACTER_LIMIT - 1000,
        hardLimit: AWS_CHARACTER_LIMIT
      });

      expect(ssmlParts).toHaveLength(3);
      expect(ssmlParts[0]).toBe(expectedFirstPart);
      expect(ssmlParts[0]).toHaveLength(2522);
      expect(ssmlParts[1]).toBe(expectedSecondPart);
      expect(ssmlParts[1]).toHaveLength(2748);
      expect(ssmlParts[2]).toBe(expectedThirdPart);
      expect(ssmlParts[2]).toHaveLength(2024);
    });
  });


});
